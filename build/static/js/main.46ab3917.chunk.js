(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{18:function(t,e,n){t.exports={header:"header_header__HZ6Fg",container:"header_container__3hoMn",nav:"header_nav__2v8dK",login:"header_login__1zFFR",link:"header_link__3XF52",name:"header_name__1gB5Y",authname:"header_authname__1n1HJ"}},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a})),n.d(e,"i",(function(){return o})),n.d(e,"j",(function(){return i})),n.d(e,"h",(function(){return s})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return f})),n.d(e,"g",(function(){return l}));var r=n(2),c=Object(r.b)("contact/add/Request"),u=Object(r.b)("contact/add/Succes"),a=Object(r.b)("contact/add/Error"),o=Object(r.b)("contact/get/Request"),i=Object(r.b)("contact/get/Succes"),s=Object(r.b)("contact/get/Error"),b=Object(r.b)("contact/delete/Request"),j=Object(r.b)("contact/delete/Succes"),f=Object(r.b)("contact/delete/Error"),l=Object(r.b)("contact/filter")},21:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var r=function(t){return t.auth.user.name},c=function(t){return t.auth.isLogin},u=function(t){return t.auth.error}},25:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return b})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return f}));var r=n(12),c=n.n(r);c.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var u="/contacts",a=function(t){return c.a.post("/users/signup",t).then((function(t){return t.data}))},o=function(t){return c.a.post("/users/login",t).then((function(t){return t.data}))},i=function(t){return c.a.post("/users/logout")},s=function(t){return c.a.get("/users/current")},b=function(){return c.a.get(u).then((function(t){return t.data}))},j=function(t){return c.a.post(u,t).then((function(t){return t.data}))},f=function(t){return c.a.delete("".concat(u,"/").concat(t))}},27:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return p}));var r=n(17),c=n.n(r),u=n(26),a=n(12),o=n.n(a),i=n(22),s=(n(85),n(51)),b=n(25),j=n(3);i.defaultModules.set(s,{});var f=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){o.a.defaults.headers.common.Authorization=""},d=function(t){return function(){var e=Object(u.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(j.k)()),e.prev=1,e.next=4,Object(b.f)(t);case 4:r=e.sent,f(r.token),n(Object(j.l)(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(Object(j.j)(e.t0.message)),Object(i.alert)({text:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},O=function(t){return function(){var e=Object(u.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(j.b)()),e.prev=1,e.next=4,Object(b.c)(t);case 4:r=e.sent,f(r.token),n(Object(j.c)(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(Object(j.a)(e.t0.message)),Object(i.alert)({text:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(j.e)()),t.prev=1,t.next=4,Object(b.b)();case 4:l(),e(Object(j.f)()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e(Object(j.d)(t.t0.message)),Object(i.alert)({text:t.t0});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(){return function(){var t=Object(u.a)(c.a.mark((function t(e,n){var r,u,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),u=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return f(u),e(Object(j.h)()),t.prev=5,t.next=8,Object(b.d)();case 8:a=t.sent,e(Object(j.i)(a.data)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),e(Object(j.g)(t.t0.message)),Object(i.alert)({text:t.t0});case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},3:function(t,e,n){"use strict";n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"j",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return f})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"g",(function(){return O}));var r=n(2),c=Object(r.b)("user/signup/Request"),u=Object(r.b)("user/signup/Succes"),a=Object(r.b)("user/signup/Error"),o=Object(r.b)("user/login/Request"),i=Object(r.b)("user/login/Succes"),s=Object(r.b)("user/login/Error"),b=Object(r.b)("user/logout/Request"),j=Object(r.b)("user/logout/Succes"),f=Object(r.b)("user/logout/Error"),l=Object(r.b)("user/refresh/Request"),d=Object(r.b)("user/refresh/Succes"),O=Object(r.b)("user/refresh/Error")},52:function(t,e,n){t.exports={container:"container_container__3TiUU"}},89:function(t,e,n){},90:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(28),u=n.n(c),a=n(38),o=n(39),i=n(41),s=n(40),b=n(0),j=n.n(b),f=n(6),l=n(14),d=(n(65),n(16)),O=n(27),h=n(21),p=n(18),g=n.n(p);var m={onLogout:O.b},x=Object(l.b)((function(t){return{islogin:Object(h.b)(t),name:Object(h.c)(t)}}),m)(Object(f.g)((function(t){var e=t.islogin,n=t.name,c=t.onLogout;return Object(r.jsx)("div",{className:g.a.header,children:Object(r.jsxs)("div",{className:g.a.container,children:[Object(r.jsx)(d.b,{className:g.a.link,to:"/",children:"Phonebook"}),e?Object(r.jsxs)("div",{className:g.a.authname,children:[Object(r.jsxs)("span",{className:g.a.name,children:["Welcome, ",n]}),Object(r.jsx)("button",{type:"button",onClick:c,className:"btn btn-primary",children:"Logout"})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:g.a.nav,children:[Object(r.jsx)(d.b,{className:g.a.login,to:"/login",children:"Login"}),Object(r.jsx)(d.b,{className:g.a.registration,to:"/registr",children:"Registration"})]})})]})})}))),v=n(52),k=n.n(v);var y,_,w,R,L,N=function(t){var e=t.children;return Object(r.jsx)("div",{className:k.a.container,children:e})},S=n(20),q=n(32),z=Object(l.b)((function(t){return{isLogin:Object(h.b)(t)}}))((function(t){var e=t.component,n=t.isLogin,c=t.restricted,u=Object(q.a)(t,["component","isLogin","restricted"]);return Object(r.jsx)(f.b,Object(S.a)(Object(S.a)({},u),{},{render:function(t){return n&&c?Object(r.jsx)(f.a,{to:"/contacts"}):Object(r.jsx)(e,Object(S.a)({},t))}}))})),E=Object(l.b)((function(t){return{token:Object(h.b)(t)}}),null)((function(t){var e=t.component,n=t.token,c=Object(q.a)(t,["component","token"]);return Object(r.jsx)(f.b,Object(S.a)(Object(S.a)({},c),{},{render:function(t){return n?Object(r.jsx)(e,Object(S.a)({},t)):Object(r.jsx)(f.a,{to:"/"})}}))})),F=j.a.lazy((function(){return Promise.all([n.e(0),n.e(9),n.e(5)]).then(n.bind(null,115))})),P=j.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,113))})),U=j.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,101))})),A=j.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,114))})),C=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.onRefreshUser()}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[" ",Object(r.jsx)(x,{}),Object(r.jsx)(N,{children:Object(r.jsx)(b.Suspense,{fallback:Object(r.jsx)("p",{children:"Loud..."}),children:Object(r.jsxs)(f.d,{children:[Object(r.jsx)(z,{restricted:!0,exact:!0,path:"/login",component:U}),Object(r.jsx)(z,{restricted:!0,exact:!0,path:"/registr",component:A}),Object(r.jsx)(E,{component:F,path:"/contacts",exact:!0}),Object(r.jsx)(z,{restricted:!0,path:"/",component:P})]})})})]})}}]),n}(j.a.Component),J={onRefreshUser:O.c},M=Object(l.b)(null,J)(C),B=n(53),H=n(2),D=n(5),K=n(55),T=n(7),W=n(19),X=Object(H.c)([],(y={},Object(D.a)(y,W.c,(function(t,e){var n=e.payload;return[].concat(Object(K.a)(t),[n])})),Object(D.a)(y,W.j,(function(t,e){return e.payload})),Object(D.a)(y,W.f,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),y)),Y=Object(H.c)("",Object(D.a)({},W.g,(function(t,e){return e.payload}))),Z=Object(T.c)({items:X,filter:Y}),G=n(3),I={name:null,email:null},Q=Object(H.c)(I,(_={},Object(D.a)(_,G.l,(function(t,e){return e.payload.user})),Object(D.a)(_,G.c,(function(t,e){return e.payload.user})),Object(D.a)(_,G.f,(function(){return I})),Object(D.a)(_,G.i,(function(t,e){return e.payload})),_)),V=Object(H.c)(null,(w={},Object(D.a)(w,G.l,(function(t,e){return e.payload.token})),Object(D.a)(w,G.c,(function(t,e){return e.payload.token})),Object(D.a)(w,G.f,(function(){return null})),w)),$=Object(H.c)(null,(R={},Object(D.a)(R,G.j,(function(t,e){return e.payload})),Object(D.a)(R,G.a,(function(t,e){return e.payload})),Object(D.a)(R,G.d,(function(t,e){return e.payload})),Object(D.a)(R,G.g,(function(t,e){return e.payload})),R)),tt=Object(H.c)(!1,(L={},Object(D.a)(L,G.i,(function(){return!0})),Object(D.a)(L,W.c,(function(){return!0})),Object(D.a)(L,W.j,(function(){return!0})),Object(D.a)(L,G.l,(function(){return!0})),Object(D.a)(L,G.c,(function(){return!0})),Object(D.a)(L,G.h,(function(){return!0})),Object(D.a)(L,G.f,(function(){return!1})),Object(D.a)(L,G.a,(function(){return!1})),Object(D.a)(L,G.j,(function(){return!1})),L)),et=Object(T.c)({user:Q,token:V,error:$,isLogin:tt}),nt=n(15),rt=n(54),ct={key:"token",storage:n.n(rt).a,whitelist:["token"]},ut=Object(nt.g)(ct,et),at=Object(T.c)({contacts:Z,auth:ut}),ot=Object(H.a)({reducer:at,middleware:Object(H.d)({serializableCheck:{ignoredActions:[nt.a,nt.f,nt.b,nt.c,nt.d,nt.e]}})}),it=Object(nt.h)(ot);n(89);u.a.render(Object(r.jsx)(l.a,{store:ot,children:Object(r.jsx)(B.a,{loading:null,persistor:it,children:Object(r.jsx)(d.a,{children:Object(r.jsx)(M,{})})})}),document.querySelector("#root"))}},[[90,3,4]]]);
//# sourceMappingURL=main.46ab3917.chunk.js.map